trigger:
  - main

pool:
  vmImage: 'windows-latest' 

steps:
  - task: NodeTool@0
    inputs:
      versionSpec: '18.x'
    displayName: 'Install Node.js'

  - script: npm install
    displayName: 'Install dependencies'

  # Speed Optimization: Only install Chromium for Windows testing
  - script: npx playwright install chromium --with-deps
    displayName: 'Install Playwright Browser'

  # Fix: Use the direct file path and ensure it's treated as a test
  - script: npx playwright test ./playwright-single.js --project=chromium
    displayName: 'Run Single Windows Test'
    env:
      LT_USERNAME: $(LT_USERNAME)
      LT_ACCESS_KEY: $(LT_ACCESS_KEY)
